{"version":3,"sources":["webpack://NeoVis/webpack/universalModuleDefinition","webpack://NeoVis/webpack/bootstrap","webpack://NeoVis/external {\"commonjs\":\"neo4j-driver\",\"commonjs2\":\"neo4j-driver\",\"amd\":\"neo4j-driver\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"amd\":\"@babel/runtime-corejs3/helpers/defineProperty\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/regenerator\",\"commonjs2\":\"@babel/runtime-corejs3/regenerator\",\"amd\":\"@babel/runtime-corejs3/regenerator\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js/get-iterator\",\"commonjs2\":\"@babel/runtime-corejs3/core-js/get-iterator\",\"amd\":\"@babel/runtime-corejs3/core-js/get-iterator\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/classCallCheck\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/classCallCheck\",\"amd\":\"@babel/runtime-corejs3/helpers/classCallCheck\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/createClass\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/createClass\",\"amd\":\"@babel/runtime-corejs3/helpers/createClass\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/object/values\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/object/values\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/object/values\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/asyncToGenerator\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/asyncToGenerator\",\"amd\":\"@babel/runtime-corejs3/helpers/asyncToGenerator\"}","webpack://NeoVis/external {\"commonjs\":\"vis/dist/vis-network.min\",\"commonjs2\":\"vis/dist/vis-network.min\",\"amd\":\"vis/dist/vis-network.min\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/promise\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/map\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/typeof\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/typeof\",\"amd\":\"@babel/runtime-corejs3/helpers/typeof\"}","webpack://NeoVis/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"}","webpack://NeoVis/external {\"commonjs\":\"vis/dist/vis-network.min.css\",\"commonjs2\":\"vis/dist/vis-network.min.css\",\"amd\":\"vis/dist/vis-network.min.css\"}","webpack://NeoVis/./src/defaults.js","webpack://NeoVis/./src/events.js","webpack://NeoVis/./src/neovis.js"],"names":["root","factory","exports","module","require","define","amd","undefined","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__10__","__WEBPACK_EXTERNAL_MODULE__11__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__13__","__WEBPACK_EXTERNAL_MODULE__14__","__WEBPACK_EXTERNAL_MODULE__15__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","defaults","neo4j","initialQuery","neo4jUri","neo4jUser","neo4jPassword","encrypted","trust","visjs","interaction","hover","hoverConnectedEdges","selectConnectedEdges","multiselect","zoomView","experimental","physics","barnesHut","damping","nodes","mass","shape","labelHighlightBold","widthConstraint","maximum","heightConstraint","edges","hoverWidth","selectionWidth","smooth","type","roundness","font","size","strokeWidth","align","color","inherit","arrows","to","enabled","scaleFactor","CompletionEvent","EventController","classCallCheck_default","this","_handlers","defineProperty_default","createClass_default","eventType","handler","Error","push","values","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","err","__webpack_exports__","neovis_NeoVis","NeoVis","config","_init","_consoleLog","message","level","arguments","length","_config","console_debug","console","_encrypted","_trust","_driver","Neo4j","driver","server_url","auth","basic","server_user","server_password","_query","initial_cypher","_container","document","getElementById","container_id","node","_nodes","id","edge","_edges","neo4jNode","label","labels","labelConfig","captionKey","sizeKey","sizeCypher","communityKey","identity","toInt","session","run","result","records","record","for_each_default","v","isInt","toNumber","sizeProp","properties","typeof_default","inSafeRange","group","e","title","concat_default","_context","concat","nodeTypeConfig","relationships","weightKey","thickness","caption","from","start","end","_context3","_this","recordCount","dataBuildPromises","limit","subscribe","onNext","_context4","constructor","dataPromises","map_default","values_default","toObject","_ref","asyncToGenerator_default","regenerator_default","a","mark","_callee2","startNode","endNode","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","obj","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_obj","_node","_edge","wrap","_context5","prev","types","Node","buildNodeVisObject","sent","_addNode","Relationship","buildEdgeVisObject","_addEdge","Path","segments","t0","t1","t2","t3","relationship","t4","finish","Array","t5","stop","_x2","apply","promise_default","all","onCompleted","_onCompleted","_callee3","options","container","_context6","close","scaling","layout","improvedLayout","hierarchical","sortMethod","hierarchical_sort_method","adaptiveTimestep","stabilization","iterations","fit","_data","vis","_network","set_timeout_default","stopSimulation","_events","generateEvent","record_count","onError","error","setData","register","render","clearNetwork","query"],"mappings":"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","file":"neovis-without-dependencies.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"neo4j-driver\"), require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"@babel/runtime-corejs3/regenerator\"), require(\"@babel/runtime-corejs3/core-js/get-iterator\"), require(\"@babel/runtime-corejs3/helpers/classCallCheck\"), require(\"@babel/runtime-corejs3/helpers/createClass\"), require(\"@babel/runtime-corejs3/core-js-stable/object/values\"), require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"), require(\"vis/dist/vis-network.min\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/helpers/typeof\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"vis/dist/vis-network.min.css\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"neo4j-driver\", \"@babel/runtime-corejs3/helpers/defineProperty\", \"@babel/runtime-corejs3/regenerator\", \"@babel/runtime-corejs3/core-js/get-iterator\", \"@babel/runtime-corejs3/helpers/classCallCheck\", \"@babel/runtime-corejs3/helpers/createClass\", \"@babel/runtime-corejs3/core-js-stable/object/values\", \"@babel/runtime-corejs3/helpers/asyncToGenerator\", \"vis/dist/vis-network.min\", \"@babel/runtime-corejs3/core-js-stable/promise\", \"@babel/runtime-corejs3/core-js-stable/instance/concat\", \"@babel/runtime-corejs3/core-js-stable/set-timeout\", \"@babel/runtime-corejs3/core-js-stable/instance/map\", \"@babel/runtime-corejs3/helpers/typeof\", \"@babel/runtime-corejs3/core-js-stable/instance/for-each\", \"vis/dist/vis-network.min.css\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NeoVis\"] = factory(require(\"neo4j-driver\"), require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"@babel/runtime-corejs3/regenerator\"), require(\"@babel/runtime-corejs3/core-js/get-iterator\"), require(\"@babel/runtime-corejs3/helpers/classCallCheck\"), require(\"@babel/runtime-corejs3/helpers/createClass\"), require(\"@babel/runtime-corejs3/core-js-stable/object/values\"), require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"), require(\"vis/dist/vis-network.min\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/helpers/typeof\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"vis/dist/vis-network.min.css\"));\n\telse\n\t\troot[\"NeoVis\"] = factory(root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__8__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__10__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__13__, __WEBPACK_EXTERNAL_MODULE__14__, __WEBPACK_EXTERNAL_MODULE__15__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","module.exports = __WEBPACK_EXTERNAL_MODULE__14__;","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","const defaults = {\r\n\r\n\tneo4j: {\r\n\t\tinitialQuery: `MATCH (n) WHERE exists(n.pagerank)\r\n                        WITH (n), RAND() AS random\r\n                        ORDER BY random LIMIT 3000\r\n                        OPTIONAL MATCH (n)-[r]-(m)\r\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\r\n                        RETURN n, r, m;`,\r\n\t\tneo4jUri: 'bolt://localhost:7687',\r\n\t\tneo4jUser: 'neo4j',\r\n\t\tneo4jPassword: 'neo4j',\r\n\t\tencrypted: 'ENCRYPTION_OFF',\r\n\t\ttrust: 'TRUST_ALL_CERTIFICATES'\r\n\t},\r\n\r\n\tvisjs: {\r\n\t\tinteraction: {\r\n\t\t\thover: true,\r\n\t\t\thoverConnectedEdges: true,\r\n\t\t\tselectConnectedEdges: false,\r\n\t\t\t//        multiselect: true,\r\n\t\t\tmultiselect: 'alwaysOn',\r\n\t\t\tzoomView: false,\r\n\t\t\texperimental: {}\r\n\t\t},\r\n\t\tphysics: {\r\n\t\t\tbarnesHut: {\r\n\t\t\t\tdamping: 0.1\r\n\t\t\t}\r\n\t\t},\r\n\t\tnodes: {\r\n\t\t\tmass: 4,\r\n\t\t\tshape: 'neo',\r\n\t\t\tlabelHighlightBold: false,\r\n\t\t\twidthConstraint: {\r\n\t\t\t\tmaximum: 40\r\n\t\t\t},\r\n\t\t\theightConstraint: {\r\n\t\t\t\tmaximum: 40\r\n\t\t\t}\r\n\t\t},\r\n\t\tedges: {\r\n\t\t\thoverWidth: 0,\r\n\t\t\tselectionWidth: 0,\r\n\t\t\tsmooth: {\r\n\t\t\t\ttype: 'continuous',\r\n\t\t\t\troundness: 0.15\r\n\t\t\t},\r\n\t\t\tfont: {\r\n\t\t\t\tsize: 9,\r\n\t\t\t\tstrokeWidth: 0,\r\n\t\t\t\talign: 'top'\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\tinherit: false\r\n\t\t\t},\r\n\t\t\tarrows: {\r\n\t\t\t\tto: {\r\n\t\t\t\t\tenabled: true,\r\n\t\t\t\t\ttype: 'arrow',\r\n\t\t\t\t\tscaleFactor: 0.5\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\nexport { defaults };","export const CompletionEvent = 'completed';\r\n\r\nexport class EventController {\r\n\r\n\tconstructor() {\r\n\t\tthis._handlers = {\r\n\t\t\t[CompletionEvent]: [],\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {string} eventType - Type of the event to be handled\r\n\t * @param {callback} handler - Handler to manage the event\r\n\t */\r\n\tregister(eventType, handler) {\r\n\t\tif (this._handlers[eventType] === undefined) {\r\n\t\t\tthrow new Error('Unknown event: ' + eventType);\r\n\t\t}\r\n\r\n\t\tthis._handlers[eventType].push(handler);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {string} eventType - Type of the event generated\r\n\t * @param {object} values - Values associated to the event\r\n\t */\r\n\tgenerateEvent(eventType, values) {\r\n\t\tif (this._handlers[eventType] === undefined) {\r\n\t\t\tthrow new Error('Unknown event: ' + eventType);\r\n\t\t}\r\n\r\n\t\tfor (const handler of this._handlers[eventType]) {\r\n\t\t\thandler(values);\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nimport Neo4j from 'neo4j-driver';\r\nimport * as vis from 'vis/dist/vis-network.min';\r\nimport 'vis/dist/vis-network.min.css';\r\nimport { defaults } from './defaults';\r\nimport { EventController, CompletionEvent } from './events';\r\n\r\nexport default class NeoVis {\r\n\t_nodes = {};\r\n\t_edges = {};\r\n\t_data = {};\r\n\t_network = null;\r\n\t_events = new EventController();\r\n\r\n\t/**\r\n\t *\r\n\t * @constructor\r\n\t * @param {object} config - configures the visualization and Neo4j server connection\r\n\t *  {\r\n\t *    container:\r\n\t *    server_url:\r\n\t *    server_password?:\r\n\t *    server_username?:\r\n\t *    labels:\r\n\t *\r\n\t *  }\r\n\t *\r\n\t */\r\n\tconstructor(config) {\r\n\t\tthis._init(config);\r\n\r\n\t\tthis._consoleLog(config);\r\n\t\tthis._consoleLog(defaults);\r\n\t}\r\n\r\n\t_consoleLog(message, level = 'log') {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tthis._config.console_debug && console[level](message);\r\n\t}\r\n\r\n\t_init(config) {\r\n\t\tthis._config = config;\r\n\t\tthis._encrypted = config.encrypted || defaults.neo4j.encrypted;\r\n\t\tthis._trust = config.trust || defaults.neo4j.trust;\r\n\t\tthis._driver = Neo4j.driver(\r\n\t\t\tconfig.server_url || defaults.neo4j.neo4jUri,\r\n\t\t\tNeo4j.auth.basic(config.server_user || defaults.neo4j.neo4jUser, config.server_password || defaults.neo4j.neo4jPassword),\r\n\t\t\t{\r\n\t\t\t\tencrypted: this._encrypted,\r\n\t\t\t\ttrust: this._trust\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis._query = config.initial_cypher || defaults.neo4j.initialQuery;\r\n\t\tthis._container = document.getElementById(config.container_id);\r\n\t}\r\n\r\n\t_addNode(node) {\r\n\t\tthis._nodes[node.id] = node;\r\n\t}\r\n\r\n\t_addEdge(edge) {\r\n\t\tthis._edges[edge.id] = edge;\r\n\t}\r\n\r\n\t/**\r\n\t * Build node object for vis from a neo4j Node\r\n\t * FIXME: use config\r\n\t * FIXME: move to private api\r\n\t * @param neo4jNode\r\n\t * @returns {{}}\r\n\t */\r\n\tasync buildNodeVisObject(neo4jNode) {\r\n\t\tlet node = {};\r\n\t\tlet label = neo4jNode.labels[0];\r\n\r\n\t\tlet labelConfig = this._config && this._config.labels && this._config.labels[label];\r\n\r\n\t\tconst captionKey = labelConfig && labelConfig['caption'];\r\n\t\tconst sizeKey = labelConfig && labelConfig['size'];\r\n\t\tconst sizeCypher = labelConfig && labelConfig['sizeCypher'];\r\n\t\tconst communityKey = labelConfig && labelConfig['community'];\r\n\r\n\t\tnode.id = neo4jNode.identity.toInt();\r\n\r\n\t\t// node size\r\n\r\n\t\tif (sizeCypher) {\r\n\t\t\t// use a cypher statement to determine the size of the node\r\n\t\t\t// the cypher statement will be passed a parameter {id} with the value\r\n\t\t\t// of the internal node id\r\n\r\n\t\t\tlet session = this._driver.session();\r\n\t\t\tconst result = await session.run(sizeCypher, {id: Neo4j.int(node.id)});\r\n\t\t\tfor (let record of result.records) {\r\n\t\t\t\trecord.forEach((v) => {\r\n\t\t\t\t\tif (typeof v === 'number') {\r\n\t\t\t\t\t\tnode.value = v;\r\n\t\t\t\t\t} else if (Neo4j.isInt(v)) {\r\n\t\t\t\t\t\tnode.value = v.toNumber();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (typeof sizeKey === 'number') {\r\n\t\t\tnode.value = sizeKey;\r\n\t\t} else {\r\n\t\t\tlet sizeProp = neo4jNode.properties[sizeKey];\r\n\r\n\t\t\tif (sizeProp && typeof sizeProp === 'number') {\r\n\t\t\t\t// property value is a number, OK to use\r\n\t\t\t\tnode.value = sizeProp;\r\n\t\t\t} else if (sizeProp && typeof sizeProp === 'object' && Neo4j.isInt(sizeProp)) {\r\n\t\t\t\t// property value might be a Neo4j Integer, check if we can call toNumber on it:\r\n\t\t\t\tif (sizeProp.inSafeRange()) {\r\n\t\t\t\t\tnode.value = sizeProp.toNumber();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// couldn't convert to Number, use default\r\n\t\t\t\t\tnode.value = 1.0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnode.value = 1.0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// node caption\r\n\t\tif (typeof captionKey === 'function') {\r\n\t\t\tnode.label = captionKey(neo4jNode);\r\n\t\t} else {\r\n\t\t\tnode.label = neo4jNode.properties[captionKey] || label || '';\r\n\t\t}\r\n\r\n\t\t// community\r\n\t\t// behavior: color by value of community property (if set in config), then color by label\r\n\t\tif (!communityKey) {\r\n\t\t\tnode.group = label;\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tif (neo4jNode.properties[communityKey]) {\r\n\t\t\t\t\tnode.group = neo4jNode.properties[communityKey].toNumber() || label || 0;  // FIXME: cast to Integer\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.group = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.group = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// set all properties as tooltip\r\n\t\tnode.title = '';\r\n\t\tfor (let key in neo4jNode.properties) {\r\n\t\t\tif (neo4jNode.properties.hasOwnProperty(key)) {\r\n\t\t\t\tnode.title += `<strong>${key}:</strong> ${neo4jNode.properties[key]}<br>`;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t * Build edge object for vis from a neo4j Relationship\r\n\t * @param r\r\n\t * @returns {{}}\r\n\t */\r\n\tbuildEdgeVisObject(r) {\r\n\t\tconst nodeTypeConfig = this._config && this._config.relationships && this._config.relationships[r.type];\r\n\t\tlet weightKey = nodeTypeConfig && nodeTypeConfig.thickness,\r\n\t\t\tcaptionKey = nodeTypeConfig && nodeTypeConfig.caption;\r\n\r\n\t\tlet edge = {};\r\n\t\tedge.id = r.identity.toInt();\r\n\t\tedge.from = r.start.toInt();\r\n\t\tedge.to = r.end.toInt();\r\n\r\n\t\t// hover tooltip. show all properties in the format <strong>key:</strong> value\r\n\t\tedge.title = '';\r\n\t\tfor (let key in r.properties) {\r\n\t\t\tif (r.properties.hasOwnProperty(key)) {\r\n\t\t\t\tedge['title'] += `<strong>${key}:</strong> ${r.properties[key]}<br>`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// set relationship thickness\r\n\t\tif (weightKey && typeof weightKey === 'string') {\r\n\t\t\tedge.value = r.properties[weightKey];\r\n\t\t} else if (weightKey && typeof weightKey === 'number') {\r\n\t\t\tedge.value = weightKey;\r\n\t\t} else {\r\n\t\t\tedge.value = 1.0;\r\n\t\t}\r\n\r\n\t\t// set caption\r\n\r\n\r\n\t\tif (typeof captionKey === 'boolean') {\r\n\t\t\tif (!captionKey) {\r\n\t\t\t\tedge.label = '';\r\n\t\t\t} else {\r\n\t\t\t\tedge.label = r.type;\r\n\t\t\t}\r\n\t\t} else if (captionKey && typeof captionKey === 'string') {\r\n\t\t\tedge.label = r.properties[captionKey] || '';\r\n\t\t} else {\r\n\t\t\tedge.label = r.type;\r\n\t\t}\r\n\r\n\t\treturn edge;\r\n\t}\r\n\r\n\t// public API\r\n\r\n\trender() {\r\n\r\n\t\t// connect to Neo4j instance\r\n\t\t// run query\r\n\t\tlet recordCount = 0;\r\n\r\n\t\tlet session = this._driver.session();\r\n\t\tconst dataBuildPromises = [];\r\n\t\tsession\r\n\t\t\t.run(this._query, {limit: 30})\r\n\t\t\t.subscribe({\r\n\t\t\t\tonNext: (record) => {\r\n\t\t\t\t\trecordCount++;\r\n\r\n\t\t\t\t\tthis._consoleLog('CLASS NAME');\r\n\t\t\t\t\tthis._consoleLog(record.constructor.name);\r\n\t\t\t\t\tthis._consoleLog(record);\r\n\r\n\t\t\t\t\tconst dataPromises = Object.values(record.toObject()).map(async (v) => {\r\n\t\t\t\t\t\tthis._consoleLog('Constructor:');\r\n\t\t\t\t\t\tthis._consoleLog(v.constructor.name);\r\n\t\t\t\t\t\tif (v instanceof Neo4j.types.Node) {\r\n\t\t\t\t\t\t\tlet node = await this.buildNodeVisObject(v);\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tthis._addNode(node);\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tthis._consoleLog(e, 'error');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if (v instanceof Neo4j.types.Relationship) {\r\n\t\t\t\t\t\t\tlet edge = this.buildEdgeVisObject(v);\r\n\t\t\t\t\t\t\tthis._addEdge(edge);\r\n\r\n\t\t\t\t\t\t} else if (v instanceof Neo4j.types.Path) {\r\n\t\t\t\t\t\t\tthis._consoleLog('PATH');\r\n\t\t\t\t\t\t\tthis._consoleLog(v);\r\n\t\t\t\t\t\t\tlet startNode = await this.buildNodeVisObject(v.start);\r\n\t\t\t\t\t\t\tlet endNode = await this.buildNodeVisObject(v.end);\r\n\r\n\t\t\t\t\t\t\tthis._addNode(startNode);\r\n\t\t\t\t\t\t\tthis._addNode(endNode);\r\n\r\n\t\t\t\t\t\t\tfor (let obj of v.segments) {\r\n\t\t\t\t\t\t\t\tthis._addNode(await this.buildNodeVisObject(obj.start));\r\n\t\t\t\t\t\t\t\tthis._addNode(await this.buildNodeVisObject(obj.end));\r\n\t\t\t\t\t\t\t\tthis._addEdge(this.buildEdgeVisObject(obj.relationship));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if (v instanceof Array) {\r\n\t\t\t\t\t\t\tfor (let obj of v) {\r\n\t\t\t\t\t\t\t\tthis._consoleLog('Array element constructor:');\r\n\t\t\t\t\t\t\t\tthis._consoleLog(obj.constructor.name);\r\n\t\t\t\t\t\t\t\tif (obj instanceof Neo4j.types.Node) {\r\n\t\t\t\t\t\t\t\t\tlet node = await this.buildNodeVisObject(obj);\r\n\t\t\t\t\t\t\t\t\tthis._addNode(node);\r\n\r\n\t\t\t\t\t\t\t\t} else if (obj instanceof Neo4j.types.Relationship) {\r\n\t\t\t\t\t\t\t\t\tlet edge = this.buildEdgeVisObject(obj);\r\n\r\n\t\t\t\t\t\t\t\t\tthis._addEdge(edge);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdataBuildPromises.push(Promise.all(dataPromises));\r\n\t\t\t\t},\r\n\t\t\t\tonCompleted: async () => {\r\n\t\t\t\t\tawait Promise.all(dataBuildPromises);\r\n\t\t\t\t\tsession.close();\r\n\t\t\t\t\tlet options = {\r\n\t\t\t\t\t\tnodes: {\r\n\t\t\t\t\t\t\tshape: 'dot',\r\n\t\t\t\t\t\t\tfont: {\r\n\t\t\t\t\t\t\t\tsize: 26,\r\n\t\t\t\t\t\t\t\tstrokeWidth: 7\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscaling: {\r\n\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\tenabled: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tedges: {\r\n\t\t\t\t\t\t\tarrows: {\r\n\t\t\t\t\t\t\t\tto: {enabled: this._config.arrows || false} // FIXME: handle default value\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlength: 200\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\timprovedLayout: false,\r\n\t\t\t\t\t\t\thierarchical: {\r\n\t\t\t\t\t\t\t\tenabled: this._config.hierarchical || false,\r\n\t\t\t\t\t\t\t\tsortMethod: this._config.hierarchical_sort_method || 'hubsize'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tphysics: { // TODO: adaptive physics settings based on size of graph rendered\r\n\t\t\t\t\t\t\t// enabled: true,\r\n\t\t\t\t\t\t\t// timestep: 0.5,\r\n\t\t\t\t\t\t\t// stabilization: {\r\n\t\t\t\t\t\t\t//     iterations: 10\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\tadaptiveTimestep: true,\r\n\t\t\t\t\t\t\t// barnesHut: {\r\n\t\t\t\t\t\t\t//     gravitationalConstant: -8000,\r\n\t\t\t\t\t\t\t//     springConstant: 0.04,\r\n\t\t\t\t\t\t\t//     springLength: 95\r\n\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\tstabilization: {\r\n\t\t\t\t\t\t\t\titerations: 200,\r\n\t\t\t\t\t\t\t\tfit: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst container = this._container;\r\n\t\t\t\t\tthis._data = {\r\n\t\t\t\t\t\tnodes: new vis.DataSet(Object.values(this._nodes)),\r\n\t\t\t\t\t\tedges: new vis.DataSet(Object.values(this._edges))\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis._consoleLog(this._data.nodes);\r\n\t\t\t\t\tthis._consoleLog(this._data.edges);\r\n\r\n\t\t\t\t\t// Create duplicate node for any this reference relationships\r\n\t\t\t\t\t// NOTE: Is this only useful for data model type data\r\n\t\t\t\t\t// this._data.edges = this._data.edges.map(\r\n\t\t\t\t\t//     function (item) {\r\n\t\t\t\t\t//          if (item.from == item.to) {\r\n\t\t\t\t\t//             const newNode = this._data.nodes.get(item.from)\r\n\t\t\t\t\t//             delete newNode.id;\r\n\t\t\t\t\t//             const newNodeIds = this._data.nodes.add(newNode);\r\n\t\t\t\t\t//             this._consoleLog(\"Adding new node and changing this-ref to node: \" + item.to);\r\n\t\t\t\t\t//             item.to = newNodeIds[0];\r\n\t\t\t\t\t//          }\r\n\t\t\t\t\t//          return item;\r\n\t\t\t\t\t//     }\r\n\t\t\t\t\t// );\r\n\t\t\t\t\tthis._network = new vis.Network(container, this._data, options);\r\n\t\t\t\t\tthis._consoleLog('completed');\r\n\t\t\t\t\tsetTimeout(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis._network.stopSimulation();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t10000\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis._events.generateEvent(CompletionEvent, {record_count: recordCount});\r\n\t\t\t\t},\r\n\t\t\t\tonError: (error) => {\r\n\t\t\t\t\tthis._consoleLog(error);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Clear the data for the visualization\r\n\t */\r\n\tclearNetwork() {\r\n\t\tthis._nodes = {};\r\n\t\tthis._edges = {};\r\n\t\tthis._network.setData([]);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @param {string} eventType Event type to be handled\r\n\t * @param {callback} handler Handler to manage the event\r\n\t */\r\n\tregisterOnEvent(eventType, handler) {\r\n\t\tthis._events.register(eventType, handler);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Reset the config object and reload data\r\n\t * @param config\r\n\t */\r\n\treinit(config) {\r\n\t\tthis._init(config);\r\n\t\tthis.render();\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch live data form the server and reload the visualization\r\n\t */\r\n\treload() {\r\n\t\tthis.clearNetwork();\r\n\t\tthis.render();\r\n\t}\r\n\r\n\t/**\r\n\t * Stabilize the visuzliation\r\n\t */\r\n\tstabilize() {\r\n\t\tthis._network.stopSimulation();\r\n\t\tthis._consoleLog('Calling stopSimulation');\r\n\t}\r\n\r\n\t/**\r\n\t * Execute an arbitrary Cypher query and re-render the visualization\r\n\t * @param query\r\n\t */\r\n\trenderWithCypher(query) {\r\n\t\t// this._config.initial_cypher = query;\r\n\t\tthis.clearNetwork();\r\n\t\tthis._query = query;\r\n\t\tthis.render();\r\n\t}\r\n\r\n// configure exports based on environment (ie Node.js or browser)\r\n//if (typeof exports === 'object') {\r\n//    module.exports = NeoVis;\r\n//} else {\r\n//    define (function () {return NeoVis;})\r\n//}\r\n}\r\n\r\n"],"sourceRoot":""}